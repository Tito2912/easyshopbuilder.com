(()=>{"use strict";document.documentElement.classList.add("js-enabled");const e=(e,t=document)=>t.querySelector(e),t=(e,t=document)=>Array.from(t.querySelectorAll(e)),n=(e,t=!1)=>"function"!=typeof window.matchMedia?t:window.matchMedia(e).matches,a=(e,t=1e3)=>"requestIdleCallback"in window?window.requestIdleCallback(e,{timeout:t}):window.setTimeout(e,t),E=()=>document.body?document.body.getAttribute("data-page")||"":"",T=e=>!!(e&&E().toLowerCase().includes(String(e).toLowerCase())),o=e=>{"loading"===document.readyState?document.addEventListener("DOMContentLoaded",e):e()},r=(()=>{try{const e=window.localStorage,t="__esb_ls_test__";return e.setItem(t,"1"),e.removeItem(t),e}catch{return null}})(),i=e=>{if(!r)return null;try{return r.getItem(e)}catch{return null}},s=(e,t)=>{if(r)try{r.setItem(e,t)}catch{}},c=e("#year");c&&(c.textContent=String((new Date).getFullYear()));const d=e(".nav__toggle"),l=e("#navMenu");if(d&&l){const e=e=>{d.setAttribute("aria-expanded",String(e)),e?l.classList.add("is-open"):l.classList.remove("is-open")};d.addEventListener("click",()=>{const t="true"===d.getAttribute("aria-expanded");e(!t)}),document.addEventListener("click",t=>{l.contains(t.target)||d.contains(t.target)||e(!1)}),document.addEventListener("keydown",t=>{"Escape"===t.key&&e(!1)})}t("[data-accordion] .faq__item").forEach(t=>{const n=e(".faq__q",t),a=e(".faq__a",t);n&&a&&(n.setAttribute("aria-expanded","false"),n.addEventListener("click",()=>{const e="true"===n.getAttribute("aria-expanded");n.setAttribute("aria-expanded",String(!e)),e?t.classList.remove("is-open"):t.classList.add("is-open")}))});const u="esb-lang",p=document.documentElement.lang||"",m=e=>(e||"").toLowerCase(),h=e=>{const t=m(e),n=t.indexOf("-");return n>-1?t.slice(0,n):t},g=h(i(u));t(".lang-switch__item").forEach(e=>{e.addEventListener("click",()=>{const t=e.getAttribute("hreflang")||"",n=h(t);n&&s(u,n)})});const w=(navigator.languages&&navigator.languages.length?navigator.languages:[navigator.language]).some(e=>e&&e.toLowerCase().startsWith("fr"));if(m(p).startsWith("fr")){if(!location.pathname.startsWith("/en/")&&!w&&(!g||"fr"!==g)){const e=(e=>{const t=e.replace(/[#?].*$/,"");switch(t){case"/":case"/index.html":return"/en/";case"/blog":case"/blog.html":return"/en/blog";case"/blog-shopify":case"/blog-shopify.html":return"/en/blog-shopify";case"/mentions-legales":case"/mentions-legales.html":return"/en/legal-notice";case"/politique-de-confidentialite":case"/politique-de-confidentialite.html":return"/en/privacy-policy";default:return t.startsWith("/en/")?t:`/en${t.endsWith("/")?t:t+""}`}})(location.pathname)+location.search+location.hash;location.replace(e)}}const f=()=>{const n=e("#blogSearch"),a=e("#blogSearch #q"),o=e("[data-search-scope]"),r=e("#noResults");if(!n||!a||!o)return;const i=t("[data-search-scope] .card"),s=()=>{if(window.history&&window.history.replaceState)try{const e=new URL(window.location.href),t=(a.value||"").trim();t?e.searchParams.set("q",t):e.searchParams.delete("q"),window.history.replaceState({},"",e)}catch{}},c=()=>{const e=(a.value||"").trim().toLowerCase();let t=0;i.forEach(n=>{const a=(n.getAttribute("data-title")||"").toLowerCase(),o=(n.getAttribute("data-tags")||"").toLowerCase(),r=!e||a.includes(e)||o.includes(e);n.style.display=r?"":"none",r&&t++}),r&&(r.hidden=0!==t)};(()=>{try{const e=new URLSearchParams(window.location.search).get("q");e&&(a.value=e)}catch{}})(),n.addEventListener("submit",e=>{e.preventDefault(),s(),c()}),a.addEventListener("input",()=>{c(),s()}),c()};T("blog")&&o(()=>a(f,800));const y=()=>{t(".video-thumb").forEach(e=>{e.addEventListener("click",()=>{const t=e.getAttribute("data-video");if(!t)return;const n=document.createElement("div");n.style.position="relative",n.style.paddingTop="56.25%",n.style.borderRadius="16px",n.style.overflow="hidden",n.style.boxShadow="0 8px 30px rgba(0,0,0,.12)";const a=document.createElement("iframe");a.src=t,a.loading="lazy",a.allow="accelerometer; autoplay; clipboard-write; encrypted-media; picture-in-picture; web-share",a.referrerPolicy="no-referrer",a.sandbox="allow-scripts allow-same-origin allow-presentation",a.style.position="absolute",a.style.inset="0",a.style.width="100%",a.style.height="100%",n.appendChild(a),e.replaceWith(n)})})};o(()=>{e(".video-thumb")&&a(y,1200)});const v=()=>{const e=n("(prefers-reduced-motion: reduce)"),a=n("(pointer:fine)",!0);!e&&a&&(t(".btn").forEach(e=>{e.addEventListener("click",function(e){if(this.classList.contains("btn--disabled"))return;const t=document.createElement("span"),n=this.getBoundingClientRect(),a=Math.max(n.width,n.height),o=e.clientX-n.left-a/2,r=e.clientY-n.top-a/2;t.style.cssText=`\n          position: absolute;\n          border-radius: 50%;\n          background: rgba(255, 255, 255, 0.6);\n          transform: scale(0);\n          animation: ripple 0.6s linear;\n          width: ${a}px;\n          height: ${a}px;\n          left: ${o}px;\n          top: ${r}px;\n          pointer-events: none;\n        `,this.style.position="relative",this.style.overflow="hidden",this.appendChild(t),setTimeout(()=>t.remove(),600)})}),t(".card, .benefit, .feature, .usecase").forEach(e=>{e.addEventListener("mouseenter",function(){this.style.transform="translateY(-8px) scale(1.02)"}),e.addEventListener("mouseleave",function(){this.style.transform="translateY(0) scale(1)"})}))},b=()=>{const e=t("video[data-delayed-src]");if(!e.length)return;const n=window.matchMedia&&window.matchMedia("(prefers-reduced-motion: reduce)").matches,o=e=>{if(!e)return;if("true"===e.dataset.loaded||"skipped"===e.dataset.loaded)return;if(n&&e.hasAttribute("data-prefer-static"))return void(e.dataset.loaded="skipped");const a=e.getAttribute("data-delayed-src");a&&(e.src=a),t("source[data-delayed-src]",e).forEach(e=>{e.src=e.getAttribute("data-delayed-src")});try{e.load()}catch{}if(e.autoplay){const t=e.play();t&&"function"==typeof t.catch&&t.catch(()=>{})}e.dataset.loaded="true"};(()=>{if(!("IntersectionObserver"in window))return void a(()=>e.forEach(e=>o(e)),1500);const t=new IntersectionObserver((e,t)=>{e.forEach(e=>{e.isIntersecting&&(o(e.target),t.unobserve(e.target))})},{rootMargin:"200px"});e.forEach(e=>t.observe(e))})(),e.forEach(e=>{const t=()=>o(e);e.addEventListener("pointerdown",t,{once:!0}),e.addEventListener("play",t,{once:!0}),e.addEventListener("keydown",t,{once:!0})}),window.setTimeout(()=>e.forEach(e=>o(e)),6e3)};o(()=>{e(".js-delayed-video")&&a(b,900)});const E="esb-consent-v1",L="esb-consent-log",S="G-9SRRTG6649",_=e("#cookieBanner"),x=e("#cookieForm"),k=()=>{try{return JSON.parse(i(E)||"null")}catch{return null}},C=()=>_&&(_.hidden=!1),A=()=>_&&(_.hidden=!0),I=()=>{if(window.__gaInjected)return;function e(){dataLayer.push(arguments)}window.__gaInjected=!0,window.dataLayer=window.dataLayer||[],window.gtag=e,e("consent","default",{ad_user_data:"denied",ad_personalization:"denied",ad_storage:"denied",analytics_storage:"denied"});const t=document.createElement("script");t.async=!0,t.src=`https://www.googletagmanager.com/gtag/js?id=${encodeURIComponent(S)}`,t.referrerPolicy="no-referrer",document.head.appendChild(t),e("js",new Date),e("config",S,{anonymize_ip:!0,allow_google_signals:!1,allow_ad_personalization_signals:!1});const n=k();n&&!0===n.analytics&&e("consent","update",{analytics_storage:"granted"})},O=k();if(O?(A(),!0===O.analytics&&(I(),window.gtag&&window.gtag("consent","update",{analytics_storage:"granted"}))):C(),x){const e=x.elements.analytics,t=e=>{(e=>{s(E,JSON.stringify(e));let t=[];try{t=JSON.parse(i(L)||"[]")}catch{}t.push({ts:(new Date).toISOString(),consent:e,path:location.pathname}),s(L,JSON.stringify(t.slice(-100)))})({necessary:!0,analytics:e,ts:(new Date).toISOString(),ver:"1.0.0"}),A(),!0===e?(I(),window.gtag&&window.gtag("consent","update",{analytics_storage:"granted"})):window.gtag&&window.gtag("consent","update",{analytics_storage:"denied"})};x.addEventListener("click",n=>{const a=n.target.closest("button[data-action]");if(!a)return;n.preventDefault();const o=a.getAttribute("data-action");"accept"===o&&t(!0),"reject"===o&&t(!1),"save"===o&&t(!(!e||!e.checked))})}window.CookieConsent={open:()=>C(),read:()=>k()};const q=()=>{const t=e("#newsletterForm");if(!t)return;const n=t.getAttribute("data-endpoint")||"",a=t.querySelector('input[name="website"]'),o=t.querySelector('input[name="email"]'),r=e("#newsletterSubmit"),i=e(".form__msg",t),s=(e,t=!1)=>{i&&(i.textContent=e,i.style.color=t?"var(--primary)":"var(--muted)")};r&&(r.disabled=!0,setTimeout(()=>{r.disabled=!1},1500));const c=e("#recaptcha-container"),d=c&&c.getAttribute("data-sitekey")||"";if(d){const e=document.createElement("script");e.src=`https://www.google.com/recaptcha/api.js?render=${encodeURIComponent(d)}`,e.async=!0,e.defer=!0,document.head.appendChild(e)}t.addEventListener("submit",async e=>{if(e.preventDefault(),r&&(r.disabled=!0),a&&""!==a.value.trim())return;const i=o?o.value.trim():"";if(!i||!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(i))return s(document.documentElement.lang.startsWith("fr")?"Veuillez saisir un e-mail valide.":"Please enter a valid email."),void(r&&(r.disabled=!1));if(!n)return s(document.documentElement.lang.startsWith("fr")?"Endpoint Apps Script manquant. Suivez le README pour connecter Google Sheets.":"Missing Apps Script endpoint. See README to connect Google Sheets."),void(r&&(r.disabled=!1));let c="";try{d&&window.grecaptcha&&window.grecaptcha.execute&&(c=await window.grecaptcha.execute(d,{action:"newsletter_signup"}))}catch{}const l={email:i,lang:p||(document.body.getAttribute("data-page")||"").includes("-fr")?"fr":"en",ts:(new Date).toISOString(),recaptchaToken:c};try{const e=await fetch(n,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(l),credentials:"omit",cache:"no-store",referrerPolicy:"no-referrer"});if(!e.ok)throw new Error(String(e.status));const a=document.documentElement.lang.startsWith("fr")?"Merci ! Vérifiez votre boîte mail (ou vos spams).":"Thank you! Check your inbox (and spam).";s(a,!0),t.reset()}catch(e){const t=document.documentElement.lang.startsWith("fr")?"Erreur d'envoi. Réessayez plus tard.":"Submission error. Please try again later.";s(t)}finally{r&&(r.disabled=!1)}})};o(()=>{e("#newsletterForm")&&a(q,1500)}),t("[data-open-cookie]").forEach(e=>{e.addEventListener("click",e=>{e.preventDefault(),window.CookieConsent.open()})});const N=document.querySelector("[data-animate]")||document.querySelector(".btn")||document.querySelector(".card")||document.querySelector(".benefit")||document.querySelector(".feature")||document.querySelector(".usecase");N&&((e,t=5e3)=>{let n=!1;const a=["pointerdown","touchstart","keydown","wheel"],o=()=>{n||(n=!0,a.forEach(e=>window.removeEventListener(e,o)),e())};a.forEach(e=>window.addEventListener(e,o,{once:!0,passive:!0})),window.setTimeout(o,t)})(()=>{a(()=>{(()=>{if(n("(prefers-reduced-motion: reduce)"))return;const e=t("[data-animate]");if(!e.length)return;if(!("IntersectionObserver"in window))return void e.forEach(e=>e.classList.add("is-visible"));const a=new IntersectionObserver(e=>{e.forEach(e=>{e.isIntersecting&&(e.target.classList.add("is-visible"),e.target.classList.remove("will-animate"),a.unobserve(e.target))})},{threshold:.1,rootMargin:"0px 0px -50px 0px"});e.forEach(e=>{e.classList.add("will-animate"),a.observe(e)})})(),v(),document.body.classList.add("loaded")},300)},5200),a(()=>{const e=document.createElement("style");e.textContent="\n      @keyframes ripple {\n        to {\n          transform: scale(4);\n          opacity: 0;\n        }\n      }\n    ",document.head.appendChild(e)},1e3);const T=()=>{const e="esb-indexnow";if(!/(?:^|\.)easyshopbuilder\.com$/i.test(window.location.hostname)||!r)return;const t=(()=>{const e=new Date(document.lastModified);return Number.isNaN(e.getTime())?"":e.toISOString().slice(0,10)})();let n="";try{if(n=JSON.parse(i(e)||"{}").stamp||"",t&&n&&t<=n)return}catch{}const a=`${window.location.origin}/sitemap-index.xml`,o=`https://www.bing.com/indexnow?url=${encodeURIComponent(a)}&key=0a7b6f0b2db44eac9fd12d34a41ae9c3`;fetch(o,{method:"GET",mode:"no-cors",keepalive:!0}).catch(()=>{});try{s(e,JSON.stringify({stamp:t||n||"pending",ts:Date.now()}))}catch{}};window.addEventListener("load",()=>{window.setTimeout(T,1500)})})();